<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.distribution.dao.order.mapper.more.MoreOrderMapper" >
  <resultMap id="BaseResultMap" type="com.distribution.dao.order.model.Order" >
    <id     column="id"              property="id"             jdbcType="INTEGER"  />
    <result column="order_category"  property="orderCategory"  jdbcType="CHAR"     />
    <result column="order_amt"       property="orderAmt"       jdbcType="NUMERIC"  />
    <result column="order_qty"       property="orderQty"       jdbcType="INTEGER"  />
    <result column="member_id"       property="memberId"       jdbcType="INTEGER"  />
    <result column="receive_name"    property="receiveName"    jdbcType="VARCHAR"  />
    <result column="express_address" property="expressAddress" jdbcType="VARCHAR"  />
    <result column="member_level"    property="memberLevel"    jdbcType="VARCHAR"  />
    <result column="order_statues"   property="orderStatues"   jdbcType="VARCHAR"  />
  </resultMap>

  <sql id="Base_Column_List" >
      id
    , order_category
    , order_amt
    , order_qty
    , member_id
    , receive_name
    , express_address
    , member_level
    , order_statues
    , create_id
    , create_time
  </sql>

   <sql id="where">
     <where>
       <if test="parameterMap.orderCategory!=null and parameterMap.orderCategory!=''">
         AND order_statues = #{parameterMap.orderCategory}
       </if>
       <if test="parameterMap.id!=null and parameterMap.id!=''">
         AND id = #{parameterMap.id}
       </if>
       <if test="parameterMap.start!=null and parameterMap.start!=''">
         AND create_time BETWEEN #{parameterMap.start} AND #{parameterMap.end}
       </if>
     </where>
   </sql>

  <sql id="pageLimit">
    <if test="pageSize!=null">
      <if test="offset!=null">
        LIMIT #{pageSize} OFFSET #{offset}
      </if>
    </if>
  </sql>

  <select id="getOrderCount" parameterType="com.distribution.common.utils.Page" resultType="java.lang.Integer">
    SELECT COUNT(*) FROM order <include refid="where"/>
  </select>
  
  <select id="list" parameterType="com.distribution.common.utils.Page" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"/> FROM member <include refid="where"/> <include refid="pageLimit"/>
  </select>
</mapper>