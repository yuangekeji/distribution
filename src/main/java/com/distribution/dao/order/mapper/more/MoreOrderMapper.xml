<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.distribution.dao.order.mapper.more.MoreOrderMapper" >
  <resultMap id="BaseResultMap" type="com.distribution.dao.order.model.Order" >
    <id column="order_no" property="orderNo" jdbcType="INTEGER" />
    <result column="order_category" property="orderCategory" jdbcType="CHAR" />
    <result column="order_amt" property="orderAmt" jdbcType="DECIMAL" />
    <result column="order_qty" property="orderQty" jdbcType="INTEGER" />
    <result column="discount" property="discount" jdbcType="INTEGER" />
    <result column="act_amt" property="actAmt" jdbcType="DECIMAL" />
    <result column="express_fee" property="expressFee" jdbcType="DECIMAL" />
    <result column="member_id" property="memberId" jdbcType="INTEGER" />
    <result column="receive_name" property="receiveName" jdbcType="VARCHAR" />
    <result column="express_address" property="expressAddress" jdbcType="VARCHAR" />
    <result column="member_level" property="memberLevel" jdbcType="VARCHAR" />
    <result column="order_statues" property="orderStatues" jdbcType="CHAR" />
    <result column="create_id" property="createId" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_id" property="updateId" jdbcType="INTEGER" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>

  <sql id="Base_Column_List" >
      order_no, order_category, order_amt, order_qty, discount, act_amt, express_fee, member_id,
      receive_name, express_address, member_level, order_statues, create_id, create_time,
      update_id, update_time
  </sql>

   <sql id="where">
     <where>
       <if test="parameterMap.memberId!=null and parameterMap.memberId!=''">
         AND member_id = #{parameterMap.memberId}
       </if>
       <if test="parameterMap.orderCategory!=null and parameterMap.orderCategory!=''">
         AND order_statues = #{parameterMap.orderCategory}
       </if>
       <if test="parameterMap.id!=null and parameterMap.id!=''">
         AND order_no = #{parameterMap.order_no}
       </if>
       <if test="parameterMap.start!=null and parameterMap.start!=''">
         AND create_time BETWEEN #{parameterMap.start} AND #{parameterMap.end}
       </if>
     </where>
   </sql>

  <sql id="pageLimit">
    <if test="pageSize!=null">
      <if test="offset!=null">
        LIMIT #{pageSize} OFFSET #{offset}
      </if>
    </if>
  </sql>

  <select id="getOrderCount" parameterType="com.distribution.common.utils.Page" resultType="java.lang.Integer">
    SELECT COUNT(*) FROM order_master <include refid="where"/>
  </select>
  
  <select id="list" parameterType="com.distribution.common.utils.Page" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"/> FROM order_master <include refid="where"/> <include refid="pageLimit"/>
  </select>
</mapper>