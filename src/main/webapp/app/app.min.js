var App=angular.module("app",["ui.router","oc.lazyLoad","app.lazyLoad","app.routes","ngStorage","ui.bootstrap","angularUtils.directives.dirPagination","home","recommend","member","advance","account","bonus","dividend","graph","order","operator","auth","product","memberCharge","admAdvance","admBasicSetting","admDividend","admMember","admOperator","admOrder","admProduct","admin","admBonus","admWarning","admTreeMember","admHandleHistory","admMemberCharge"]);angular.module("app.lazyLoad",[]),angular.module("app.routes",[]),angular.module("home",[]),angular.module("recommend",[]),angular.module("member",[]),angular.module("advance",[]),angular.module("account",[]),angular.module("bonus",[]),angular.module("dividend",[]),angular.module("graph",[]),angular.module("order",[]),angular.module("operator",[]),angular.module("auth",[]),angular.module("product",[]),angular.module("memberCharge",[]),angular.module("admAdvance",[]),angular.module("admBasicSetting",[]),angular.module("admDividend",[]),angular.module("admMember",[]),angular.module("admOperator",[]),angular.module("admOrder",[]),angular.module("admProduct",[]),angular.module("admBonus",[]),angular.module("admin",[]),angular.module("admWarning",[]),angular.module("admTreeMember",[]),angular.module("admHandleHistory",[]),angular.module("admMemberCharge",[]),angular.module("admNotice",[]),App.controller("AppCtrl",["$scope","$rootScope","$http","$state","$sessionStorage","ConfirmModal",function(e,a,o,n,t,r){e.currentUser={},e.onInit=function(){e.ctx=window.ctx,e.roleId=window.roleId,"1"!=e.roleId&&o.get(ctx+"/admWarning/getFailJobCount").success(function(a){a.successful?e.failCnt=a.data:e.failCnt=0}),o.get(ctx+"/menu/getMenuByRoleId?roleId="+e.roleId).success(function(o){a.menu=o.data.menus,e.firstMenu=[],angular.forEach(a.menu,function(a,o){0==a.parentMenu&&e.firstMenu.push(a)}),e.secondMenu=[],angular.forEach(a.menu,function(a,o){a.parentMenu>0&&e.secondMenu.push(a)})}),o.get(ctx+"/role/getUserRole").success(function(a){t.currentUser=a.currentUser,e.currentUser=a.currentUser}).error(function(e){alert("用户获取失败")})},e.onInit(),e.logOut=function(){r.show({text:"确定要退出系统吗？退出后将返回登录页面",isCancel:!0}).then(function(e){e&&o.post(ctx+"/member/logout").success(function(e){e.successful&&(t&&t.currentUser&&(t.currentUser=null),window.location.href=ctx)}).error(function(e){console.log(e)})})},e.goUrl=function(e){n.go(e);var a=$(".navbar-collapse").hasClass("width")?"width":"height";$(".navbar-collapse").removeClass("collapse in").addClass("collapse")[a](0).attr("aria-expanded",!1)}}]),App.config(["$ocLazyLoadProvider",function(e){e.config({})}]),App.config(["$controllerProvider",function(e){e.allowGlobals()}]),App.controller("TplController",["$state","$scope","$rootScope","$http","$sessionStorage",function(e,a,o,n,t){a.$on("$includeContentLoaded",function(){Layout.initHeader(),Layout.initFooter(),Layout.initSidebar()})}]),App.factory("settings",["$rootScope",function(e){var a={layout:{pageSidebarClosed:!1,pageContentWhite:!0,pageBodySolid:!1,pageAutoScrollOnLoad:1e3},assetsPath:"static/metronic",globalPath:"static/metronic/global",layoutPath:"static/metronic/layouts/layout2"};return e.settings=a,a}]),String.prototype.replaceAll=function(e,a){for(var o=this;-1!=o.indexOf(e);)o=o.replace(e,a);return o},App.directive("ngSpinnerBar",["$rootScope","$state",function(e,a){return{link:function(a,o,n){o.addClass("hide"),e.$on("$stateChangeStart",function(){o.removeClass("hide")}),e.$on("$stateChangeSuccess",function(a){o.addClass("hide"),$("body").removeClass("page-on-load"),Layout.setAngularJsSidebarMenuActiveLink("match",null,a.currentScope.$state),setTimeout(function(){App.scrollTop()},e.settings.layout.pageAutoScrollOnLoad)}),e.$on("$stateNotFound",function(){o.addClass("hide")}),e.$on("$stateChangeError",function(){o.addClass("hide")})}}}]),App.run(["$rootScope","$state","$stateParams","settings","$sessionStorage",function(e,a,o,n,t){e.$state=a,e.$stateParams=o,e.$settings=n}]);