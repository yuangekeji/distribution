angular.module("app").factory("ConfirmModal",["$uibModal","$q","$sce","$timeout",function(e,n,t,r){angular.module("app").controller("confirmModalCtrl",["$scope","$uibModalInstance","parameters",function(e,n,r){e.title=angular.isUndefined(r.title)?"common.text.title":r.title,e.text=angular.isUndefined(r.text)?"":r.text,e.icon=angular.isUndefined(r.icon)?"":r.icon,e.text=$translate.instant(e.text),e.text=t.trustAsHtml(e.text),e.isCancel=!0,angular.isUndefined(r)||null==r.onOpened||n.opened.then(function(){r.onOpened()}),angular.isUndefined(r.isCancel)||(e.isCancel=r.isCancel),e.ok=function(){r.deferred.resolve(!0),n.dismiss("cancel")},e.cancel=function(){r.deferred.resolve(!1),n.dismiss("cancel")}}]);return{open:function(t){var r=n.defer(),a=null;angular.isUndefined(t)||angular.isUndefined(t.currentScope)||(a=t.currentScope);return{modalInstance:e.open({templateUrl:angular.isUndefined(t)||angular.isUndefined(t.templateUrl)?"app/common/tpl/confirm.tpl.html":t.templateUrl,controller:angular.isUndefined(t)||angular.isUndefined(t.controller)?"confirmModalCtrl":t.controller,scope:a,backdrop:"static",size:angular.isUndefined(t)||angular.isUndefined(t.size)?"":t.size,windowClass:angular.isUndefined(t)||angular.isUndefined(t.windowClass)?"":t.windowClass,resolve:{parameters:function(){return{deferred:r,title:angular.isUndefined(t)||angular.isUndefined(t.title)?"":t.title,text:angular.isUndefined(t)||angular.isUndefined(t.text)?"":t.text,icon:angular.isUndefined(t)||angular.isUndefined(t.icon)?"":t.icon,isCancel:!(!angular.isUndefined(t)&&!angular.isUndefined(t.isCancel))||t.isCancel,onOpened:angular.isUndefined(t)||angular.isUndefined(t.onOpened)?null:t.onOpened,obj:t.params}}}}),promise:r.promise}},show:function(t){var r=n.defer();e.open({templateUrl:"app/common/tpl/confirm.tpl.html",controller:"confirmModalCtrl",backdrop:"static",resolve:{parameters:function(){return{deferred:r,title:angular.isUndefined(t.title)?"":t.title,text:angular.isUndefined(t.text)?"":t.text,icon:angular.isUndefined(t.icon)?"":t.icon,isCancel:!!angular.isUndefined(t.isCancel)||t.isCancel,onOpened:angular.isUndefined(t.onOpened)?null:t.onOpened,obj:t.params}}}});return r.promise},openTpl:function(t){var r=n.defer();return e.open({templateUrl:t.templateUrl,controller:"modalCtrl",scope:t.currentScope,resolve:{parameters:function(){return{deferred:r,loadSuccess:t.loadSuccess}}}}),r.promise}}}]),angular.module("app").service("Notify",[function(){this.success=function(e){$.notify('<i class="fa fa-check "></i> '+e,{status:"success"})},this.error=function(e){$.notify('<i class="fa fa-times-circle "></i> '+e,{status:"danger"})},this.warning=function(e){$.notify('<i class="fa fa-lg fa-exclamation-triangle fload-l mt5"></i> '+e,{status:"warning"})}}]),angular.module("app").factory("sessionRecoverer",["$q","$injector","$window",function(e,n,t){return{request:function(n){return n||e.when(n)},responseError:function(n){switch(n.status){case 200:break;case 500:alert("服务器系统内部错误");break;case 401:alert("未登录");break;case 403:alert("无权限执行此操作");break;case 408:alert("请求超时");break;case 404:alert("404找不到路径");break;default:alert("未知错误")}return n.status,403==n.status&&(t.location.href=ctx+"/index#/app/home"),e.reject(n)}}}]).config(["$httpProvider",function(e){e.interceptors.push("sessionRecoverer")}]),angular.module("app").service("routerService",["$state","$sessionStorage",function(e,n){return n.routerStates=[],{nextPage:function(t){var r={url:e.current.name,param:t,state:e.params};n.routerStates.push(r)},getLastUrl:function(){var e=n.routerStates.length;return e>0?n.routerStates[e].url:""},getLastState:function(){var e=n.routerStates.length;return e>0?n.routerStates[e].state:{}},getCurrentParam:function(){var e=n.routerStates.length;if(e>0){return angular.copy(n.routerStates[e].param)}return{}},clearCurrentState:function(){var t=n.routerStates.length;0!=t&&e.current.name==n.routerStates[t].url&&n.routerStates.pop()},clearAll:function(){n.routerStates=[]}}}]),angular.module("app").service("title",function(){return{setTitle:function(e){!function(e){document.title=e}(e)}}});